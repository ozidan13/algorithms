<!DOCTYPE html>
<html lang="en" class="scroll-smooth" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Visualization | ØªØµÙˆØ± Ø§Ù„Ø°Ø§ÙƒØ±Ø©</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&family=Inter:wght@400;600;800&family=Fira+Code:wght@400;500&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        neon: { green: '#10B981', blue: '#3B82F6', purple: '#8B5CF6', cyan: '#06B6D4' },
                        dark: { bg: '#020617', card: '#0F172A', border: '#1E293B' }
                    },
                    fontFamily: { sans: ['Inter'], arabic: ['Cairo'], mono: ['Fira Code'] }
                }
            }
        }
    </script>
    <style>
        body {
            background: #020617;
            color: #E2E8F0;
            overflow-x: hidden;
        }

        .glass-card {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .text-gradient {
            background: linear-gradient(135deg, #8B5CF6, #06B6D4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .rtl-block {
            direction: rtl;
            text-align: right;
        }

        .mem-cell {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Fira Code';
            font-size: 0.75rem;
            border: 1px solid #334155;
            transition: all 0.3s;
        }

        .mem-cell.empty {
            background: #0F172A;
            color: #475569;
        }

        .mem-cell.array {
            background: linear-gradient(135deg, #1D4ED8, #1E40AF);
            color: white;
            border-color: #3B82F6;
        }

        .mem-cell.linked {
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            border-color: #FBBF24;
        }

        .mem-cell.ptr {
            background: #1E293B;
            color: #F59E0B;
            font-size: 0.65rem;
        }

        .mem-cell.free {
            background: #064e3b;
            border-color: #10B981;
        }

        .mem-cell.used {
            background: #7C3AED;
            border-color: #A78BFA;
            color: white;
        }

        .mem-cell.fragmented {
            background: #991B1B;
            border-color: #EF4444;
        }
    </style>
</head>

<body>
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 glass-card border-b-0">
        <div class="container mx-auto px-6 h-16 flex items-center justify-between">
            <a href="../index.html#week2" class="flex items-center gap-3 hover:opacity-80 transition">
                <div
                    class="w-8 h-8 rounded bg-gradient-to-br from-purple-500 to-cyan-500 flex items-center justify-center text-white">
                    <i class="fas fa-arrow-left text-sm"></i></div>
                <span class="font-bold text-lg">Memory<span class="text-purple-500">Viz</span></span>
            </a>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative pt-32 pb-20 px-6 overflow-hidden">
        <div
            class="absolute top-0 right-0 w-[500px] h-[500px] bg-purple-500/10 rounded-full blur-[128px] pointer-events-none">
        </div>
        <div class="container mx-auto text-center relative z-10" data-aos="fade-up">
            <div
                class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-slate-800/50 border border-slate-700 text-xs font-mono text-purple-400 mb-6">
                <span class="w-2 h-2 rounded-full bg-purple-500 animate-pulse"></span>
                WEEK 2 â€¢ ÙÙ‡Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø©
            </div>
            <h1 class="text-5xl md:text-7xl font-black mb-6"><span class="text-gradient">Memory</span> Layout</h1>
            <h2 class="text-3xl font-bold text-slate-400 font-arabic mb-8">Ø¥Ø²Ø§ÙŠ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ®Ø²Ù†Ø© ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h2>
        </div>
    </header>

    <!-- Memory Basics -->
    <section id="concept" class="py-20 px-6 bg-slate-900/30">
        <div class="container mx-auto max-w-5xl">
            <h2 class="text-4xl font-bold text-center mb-12"><i
                    class="fa-solid fa-microchip text-purple-500 mr-3"></i>Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h2>

            <div class="glass-card p-8 rounded-2xl border border-purple-900/50 mb-12" data-aos="fade-up">
                <div class="rtl-block">
                    <h3 class="text-2xl font-bold text-purple-400 mb-6 font-arabic">ğŸ’¾ Ø¥ÙŠÙ‡ Ù‡ÙŠ Ø§Ù„Ù€ RAMØŸ</h3>

                    <div class="space-y-6 text-lg leading-loose font-arabic">
                        <div class="p-5 bg-slate-900/50 rounded-xl border border-slate-700">
                            <h4 class="text-xl font-bold text-yellow-400 mb-3">ğŸ“– ØªØ´Ø¨ÙŠÙ‡ Ø§Ù„Ø®Ø²Ø§Ø¦Ù†</h4>
                            <p class="text-slate-300">
                                ØªØ®ÙŠÙ„ Ø§Ù„Ø°Ø§ÙƒØ±Ø© (RAM) ÙƒØµÙ Ø·ÙˆÙŠÙ„ Ù…Ù† <span class="text-purple-400 font-bold">Ø§Ù„Ø®Ø²Ø§Ø¦Ù†</span>:
                            </p>
                            <ul class="mt-3 space-y-2 text-slate-300">
                                <li>â€¢ ÙƒÙ„ Ø®Ø²Ù†Ø© Ù„ÙŠÙ‡Ø§ <span class="text-cyan-400 font-bold">Ø¹Ù†ÙˆØ§Ù† (Address)</span> - Ø±Ù‚Ù…
                                    ÙØ±ÙŠØ¯</li>
                                <li>â€¢ ÙƒÙ„ Ø®Ø²Ù†Ø© Ø¨ØªØ´ÙŠÙ„ <span class="text-yellow-400 font-bold">byte ÙˆØ§Ø­Ø¯</span> (8 bits)
                                </li>
                                <li>â€¢ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨ØªÙƒÙˆÙ† <span class="text-emerald-400">Ø£Ø±Ù‚Ø§Ù… Ù…ØªØªØ§Ù„ÙŠØ©</span> (0x100, 0x101,
                                    0x102...)</li>
                            </ul>
                        </div>

                        <div class="p-5 bg-slate-900/50 rounded-xl border border-slate-700">
                            <h4 class="text-xl font-bold text-cyan-400 mb-3">ğŸ“ Ø£Ø­Ø¬Ø§Ù… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h4>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-3 mt-4">
                                <div class="p-3 bg-slate-800/50 rounded-lg text-center">
                                    <span class="text-cyan-400 font-mono font-bold">byte</span>
                                    <p class="text-sm text-slate-400 mt-1">1 byte</p>
                                </div>
                                <div class="p-3 bg-slate-800/50 rounded-lg text-center">
                                    <span class="text-blue-400 font-mono font-bold">int</span>
                                    <p class="text-sm text-slate-400 mt-1">4 bytes</p>
                                </div>
                                <div class="p-3 bg-slate-800/50 rounded-lg text-center">
                                    <span class="text-purple-400 font-mono font-bold">pointer</span>
                                    <p class="text-sm text-slate-400 mt-1">8 bytes (64-bit)</p>
                                </div>
                                <div class="p-3 bg-slate-800/50 rounded-lg text-center">
                                    <span class="text-emerald-400 font-mono font-bold">char</span>
                                    <p class="text-sm text-slate-400 mt-1">1-2 bytes</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Array vs Linked List Memory -->
    <section class="py-20 px-6">
        <div class="container mx-auto max-w-5xl">
            <h2 class="text-4xl font-bold text-center mb-12"><i class="fa-solid fa-memory text-blue-500 mr-3"></i>Ø§Ù„ÙØ±Ù‚
                ÙÙŠ Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h2>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Array Memory -->
                <div class="glass-card p-6 rounded-2xl border border-blue-700/50" data-aos="fade-right">
                    <h3 class="text-xl font-bold text-blue-400 mb-4 flex items-center gap-2">
                        <i class="fas fa-table-cells"></i> Array (Contiguous)
                    </h3>

                    <div class="bg-slate-900/50 rounded-xl p-4 mb-4">
                        <p class="text-xs text-slate-500 mb-2">Memory Addresses:</p>
                        <div class="flex flex-wrap gap-1">
                            <div class="mem-cell empty">...</div>
                            <div class="mem-cell array">10</div>
                            <div class="mem-cell array">25</div>
                            <div class="mem-cell array">33</div>
                            <div class="mem-cell array">47</div>
                            <div class="mem-cell array">58</div>
                            <div class="mem-cell empty">...</div>
                        </div>
                        <div class="flex flex-wrap gap-1 mt-1">
                            <div class="text-xs text-slate-600 w-[40px] text-center">...</div>
                            <div class="text-xs text-blue-400 w-[40px] text-center">100</div>
                            <div class="text-xs text-blue-400 w-[40px] text-center">104</div>
                            <div class="text-xs text-blue-400 w-[40px] text-center">108</div>
                            <div class="text-xs text-blue-400 w-[40px] text-center">10C</div>
                            <div class="text-xs text-blue-400 w-[40px] text-center">110</div>
                            <div class="text-xs text-slate-600 w-[40px] text-center">...</div>
                        </div>
                    </div>

                    <div class="rtl-block font-arabic text-sm">
                        <div class="p-3 bg-blue-950/30 rounded-lg border border-blue-700 mb-3">
                            <p class="text-blue-400 font-bold mb-1">âœ“ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:</p>
                            <ul class="text-slate-300 space-y-1">
                                <li>â€¢ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±: <span class="text-emerald-400">O(1)</span></li>
                                <li>â€¢ Ø§Ø³ØªÙ‡Ù„Ø§Ùƒ Ø°Ø§ÙƒØ±Ø© Ø£Ù‚Ù„ (Ù…ÙÙŠØ´ pointers)</li>
                                <li>â€¢ Cache-friendly (Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªØ¬Ø§ÙˆØ±Ø©)</li>
                            </ul>
                        </div>
                        <div class="p-3 bg-red-950/30 rounded-lg border border-red-700">
                            <p class="text-red-400 font-bold mb-1">âœ— Ø§Ù„Ø¹ÙŠÙˆØ¨:</p>
                            <ul class="text-slate-300 space-y-1">
                                <li>â€¢ Ø§Ù„Ø­Ø¬Ù… Ø«Ø§Ø¨Øª (lazy resize = O(n))</li>
                                <li>â€¢ Ø§Ù„Ø¥Ø¶Ø§ÙØ©/Ø§Ù„Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø£ÙˆÙ„: <span class="text-red-400">O(n)</span></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Linked List Memory -->
                <div class="glass-card p-6 rounded-2xl border border-orange-700/50" data-aos="fade-left">
                    <h3 class="text-xl font-bold text-orange-400 mb-4 flex items-center gap-2">
                        <i class="fas fa-link"></i> Linked List (Scattered)
                    </h3>

                    <div class="bg-slate-900/50 rounded-xl p-4 mb-4">
                        <p class="text-xs text-slate-500 mb-2">Memory Addresses (Ù…ØªÙØ±Ù‚Ø©!):</p>
                        <div class="flex flex-wrap gap-1">
                            <div class="mem-cell linked">10</div>
                            <div class="mem-cell ptr">â†’208</div>
                            <div class="mem-cell empty">...</div>
                            <div class="mem-cell empty">...</div>
                            <div class="mem-cell linked">25</div>
                            <div class="mem-cell ptr">â†’350</div>
                            <div class="mem-cell empty">...</div>
                        </div>
                        <div class="flex flex-wrap gap-1 mt-1">
                            <div class="text-xs text-orange-400 w-[40px] text-center">100</div>
                            <div class="text-xs text-slate-500 w-[40px] text-center">ptr</div>
                            <div class="text-xs text-slate-600 w-[40px] text-center">...</div>
                            <div class="text-xs text-slate-600 w-[40px] text-center">...</div>
                            <div class="text-xs text-orange-400 w-[40px] text-center">208</div>
                            <div class="text-xs text-slate-500 w-[40px] text-center">ptr</div>
                            <div class="text-xs text-slate-600 w-[40px] text-center">...</div>
                        </div>
                    </div>

                    <div class="rtl-block font-arabic text-sm">
                        <div class="p-3 bg-emerald-950/30 rounded-lg border border-emerald-700 mb-3">
                            <p class="text-emerald-400 font-bold mb-1">âœ“ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª:</p>
                            <ul class="text-slate-300 space-y-1">
                                <li>â€¢ Ø§Ù„Ø­Ø¬Ù… Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ (dynamic)</li>
                                <li>â€¢ Ø§Ù„Ø¥Ø¶Ø§ÙØ©/Ø§Ù„Ø­Ø°Ù Ù…Ù† Ø§Ù„Ø£ÙˆÙ„: <span class="text-emerald-400">O(1)</span></li>
                                <li>â€¢ Ù…Ø´ Ù…Ø­ØªØ§Ø¬ Ù…ÙƒØ§Ù† Ù…ØªØµÙ„</li>
                            </ul>
                        </div>
                        <div class="p-3 bg-red-950/30 rounded-lg border border-red-700">
                            <p class="text-red-400 font-bold mb-1">âœ— Ø§Ù„Ø¹ÙŠÙˆØ¨:</p>
                            <ul class="text-slate-300 space-y-1">
                                <li>â€¢ Ø§Ù„ÙˆØµÙˆÙ„: <span class="text-red-400">O(n)</span> - Ù„Ø§Ø²Ù… traverse</li>
                                <li>â€¢ Ø°Ø§ÙƒØ±Ø© Ø²ÙŠØ§Ø¯Ø© Ù„Ù„Ù€ pointers</li>
                                <li>â€¢ Cache misses (Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…ØªÙØ±Ù‚Ø©)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Memory Fragmentation -->
    <section class="py-20 px-6 bg-slate-900/30">
        <div class="container mx-auto max-w-5xl">
            <h2 class="text-4xl font-bold text-center mb-4"><i
                    class="fa-solid fa-puzzle-piece text-red-500 mr-3"></i>Memory Fragmentation</h2>
            <p class="text-center text-slate-400 font-arabic mb-12">ØªÙØªØª Ø§Ù„Ø°Ø§ÙƒØ±Ø©</p>

            <div class="glass-card p-8 rounded-2xl" data-aos="fade-up">
                <div class="rtl-block mb-8">
                    <h3 class="text-xl font-bold text-red-400 mb-4 font-arabic">âš ï¸ Ø¥ÙŠÙ‡ Ù‡Ùˆ Ø§Ù„Ù€ FragmentationØŸ</h3>
                    <p class="text-slate-300 font-arabic">
                        Ù„Ù…Ø§ Ø¨Ù†Ø­Ø¬Ø² ÙˆÙ†ÙØ¶ÙŠ Ø°Ø§ÙƒØ±Ø© ÙƒØªÙŠØ±ØŒ Ø¨ÙŠØ¨Ù‚Ù‰ ÙÙŠÙ‡ <span class="text-red-400 font-bold">ÙØ±Ø§ØºØ§Øª ØµØºÙŠØ±Ø©</span>
                        Ø¨ÙŠÙ† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.
                        <br>
                        Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ù…Ù…ÙƒÙ† ÙŠÙƒÙˆÙ† ÙÙŠÙ‡ Ø°Ø§ÙƒØ±Ø© ÙØ§Ø¶ÙŠØ© ÙƒØªÙŠØ±ØŒ Ø¨Ø³ <span class="text-yellow-400">Ù…Ø´ Ù…ØªØµÙ„Ø©</span>!
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <p class="text-sm text-slate-400 mb-3">Before (No Fragmentation):</p>
                        <div class="flex flex-wrap gap-1 p-4 bg-slate-900/50 rounded-xl">
                            <div class="mem-cell used">A</div>
                            <div class="mem-cell used">A</div>
                            <div class="mem-cell used">A</div>
                            <div class="mem-cell used">B</div>
                            <div class="mem-cell used">B</div>
                            <div class="mem-cell used">C</div>
                            <div class="mem-cell used">C</div>
                            <div class="mem-cell used">C</div>
                            <div class="mem-cell free"></div>
                            <div class="mem-cell free"></div>
                            <div class="mem-cell free"></div>
                            <div class="mem-cell free"></div>
                        </div>
                        <p class="text-xs text-emerald-400 mt-2">4 Ø®Ù„Ø§ÙŠØ§ ÙØ§Ø¶ÙŠØ© Ù…ØªØµÙ„Ø© âœ“</p>
                    </div>
                    <div>
                        <p class="text-sm text-slate-400 mb-3">After Deletions (Fragmented):</p>
                        <div class="flex flex-wrap gap-1 p-4 bg-slate-900/50 rounded-xl">
                            <div class="mem-cell used">A</div>
                            <div class="mem-cell fragmented"></div>
                            <div class="mem-cell used">A</div>
                            <div class="mem-cell fragmented"></div>
                            <div class="mem-cell fragmented"></div>
                            <div class="mem-cell used">C</div>
                            <div class="mem-cell used">C</div>
                            <div class="mem-cell fragmented"></div>
                            <div class="mem-cell used">D</div>
                            <div class="mem-cell fragmented"></div>
                            <div class="mem-cell fragmented"></div>
                            <div class="mem-cell used">D</div>
                        </div>
                        <p class="text-xs text-red-400 mt-2">6 Ø®Ù„Ø§ÙŠØ§ ÙØ§Ø¶ÙŠØ© Ø¨Ø³ Ù…ØªÙØ±Ù‚Ø©! âœ—</p>
                    </div>
                </div>

                <div class="mt-6 p-4 bg-yellow-950/30 rounded-xl border border-yellow-700 rtl-block">
                    <p class="text-yellow-400 font-bold font-arabic mb-2">ğŸ’¡ Ù„ÙŠÙ‡ Ø¯Ù‡ Ù…Ø´ÙƒÙ„Ø©ØŸ</p>
                    <p class="text-sm text-slate-300 font-arabic">
                        Ù„Ùˆ Ø¹Ø§ÙŠØ² ØªØ­Ø¬Ø² <span class="text-cyan-400">array Ù…Ù† 4 Ø®Ù„Ø§ÙŠØ§</span>ØŒ Ù…Ø´ Ù‡ØªÙ„Ø§Ù‚ÙŠ Ù…ÙƒØ§Ù† Ù…ØªØµÙ„ Ø±ØºÙ… Ø¥Ù† ÙÙŠÙ‡
                        6 Ø®Ù„Ø§ÙŠØ§ ÙØ§Ø¶ÙŠØ©!
                        <br>
                        <span class="text-slate-400">Ø§Ù„Ø­Ù„:</span> Garbage Collection, Compaction, Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Linked
                        Lists.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Interactive Demo -->
    <section id="demo" class="py-20 px-6">
        <div class="container mx-auto max-w-4xl">
            <div class="text-center mb-12">
                <span class="text-purple-500 font-mono text-sm">INTERACTIVE</span>
                <h2 class="text-4xl font-bold text-white mt-2">Memory Allocation Demo</h2>
            </div>

            <div class="glass-card p-8 rounded-2xl" data-aos="fade-up">
                <div class="flex flex-wrap gap-3 mb-6 justify-center">
                    <input type="text" id="name-input" placeholder="Name (A-Z)" maxlength="1"
                        class="px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white font-mono w-24 text-center uppercase">
                    <input type="number" id="size-input" placeholder="Size" min="1" max="5" value="2"
                        class="px-4 py-2 bg-slate-900 border border-slate-700 rounded-lg text-white font-mono w-20 text-center">
                    <button id="alloc-btn"
                        class="px-4 py-2 bg-emerald-600 text-white font-bold rounded-lg hover:bg-emerald-500 transition"><i
                            class="fas fa-plus mr-1"></i>Allocate</button>
                    <button id="free-btn"
                        class="px-4 py-2 bg-red-600 text-white font-bold rounded-lg hover:bg-red-500 transition"><i
                            class="fas fa-minus mr-1"></i>Free</button>
                    <button id="compact-btn"
                        class="px-4 py-2 bg-purple-600 text-white font-bold rounded-lg hover:bg-purple-500 transition"><i
                            class="fas fa-compress mr-1"></i>Compact</button>
                    <button id="reset-btn"
                        class="px-4 py-2 bg-slate-700 text-white font-bold rounded-lg hover:bg-slate-600 transition"><i
                            class="fas fa-redo mr-1"></i>Reset</button>
                </div>

                <div id="mem-grid"
                    class="flex flex-wrap gap-1 p-6 bg-slate-900/50 rounded-xl border border-slate-800 justify-center min-h-[100px]">
                </div>

                <div class="flex gap-4 justify-center mt-4 text-sm">
                    <div class="flex items-center gap-2">
                        <div class="mem-cell free w-6 h-6 text-xs"></div><span class="text-slate-400">Free</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="mem-cell used w-6 h-6 text-xs"></div><span class="text-slate-400">Used</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <div class="mem-cell fragmented w-6 h-6 text-xs"></div><span
                            class="text-slate-400">Fragmented</span>
                    </div>
                </div>

                <div id="info" class="mt-6 p-4 bg-slate-900/80 rounded-xl border border-slate-800 text-center">
                    <p class="text-slate-400">Enter a name (A-Z) and size, then allocate.</p>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-12 text-center text-slate-600 bg-black/40 text-sm">
        <p>Grokking Algorithms Course - Week 2</p>
    </footer>

    <script>
        AOS.init({ duration: 800, once: true });

        const memGrid = document.getElementById('mem-grid');
        const nameInput = document.getElementById('name-input');
        const sizeInput = document.getElementById('size-input');
        const info = document.getElementById('info');
        const SIZE = 20;
        let memory = Array(SIZE).fill(null);

        function render() {
            memGrid.innerHTML = '';
            let hasFragmentation = false;
            for (let i = 0; i < SIZE; i++) {
                const cell = document.createElement('div');
                cell.className = 'mem-cell';
                if (memory[i]) {
                    cell.classList.add('used');
                    cell.textContent = memory[i];
                } else {
                    // Check for fragmentation (free cell between used cells)
                    const hasBefore = i > 0 && memory[i - 1] !== null;
                    const hasAfter = i < SIZE - 1 && memory[i + 1] !== null;
                    if (hasBefore && hasAfter) {
                        cell.classList.add('fragmented');
                        hasFragmentation = true;
                    } else {
                        cell.classList.add('free');
                    }
                }
                memGrid.appendChild(cell);
            }
            return hasFragmentation;
        }

        document.getElementById('alloc-btn').onclick = () => {
            const name = nameInput.value.toUpperCase();
            const size = parseInt(sizeInput.value) || 1;
            if (!name.match(/^[A-Z]$/)) { info.innerHTML = '<p class="text-red-400">Enter a single letter!</p>'; return; }

            // Find first-fit
            let start = -1;
            let count = 0;
            for (let i = 0; i < SIZE; i++) {
                if (memory[i] === null) {
                    if (start === -1) start = i;
                    count++;
                    if (count >= size) break;
                } else {
                    start = -1;
                    count = 0;
                }
            }

            if (count < size) {
                info.innerHTML = `<p class="text-red-400 font-arabic">Ù…ÙÙŠØ´ Ù…ÙƒØ§Ù† Ù…ØªØµÙ„ ÙƒØ§ÙÙŠ! (Ù…Ø­ØªØ§Ø¬ ${size}, Ø£ÙƒØ¨Ø± ÙØ±Ø§Øº Ù…ØªØµÙ„ = ${count})</p>`;
                return;
            }

            for (let i = start; i < start + size; i++) memory[i] = name;
            render();
            info.innerHTML = `<p class="text-emerald-400 font-arabic">ØªÙ… Ø­Ø¬Ø² ${size} Ø®Ù„Ø§ÙŠØ§ Ù„Ù€ "${name}" Ù…Ù† index ${start}</p>`;
            nameInput.value = '';
        };

        document.getElementById('free-btn').onclick = () => {
            const name = nameInput.value.toUpperCase();
            if (!name.match(/^[A-Z]$/)) { info.innerHTML = '<p class="text-red-400">Enter a letter to free!</p>'; return; }

            let freed = 0;
            for (let i = 0; i < SIZE; i++) {
                if (memory[i] === name) { memory[i] = null; freed++; }
            }

            if (freed === 0) { info.innerHTML = `<p class="text-yellow-400">"${name}" Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯!</p>`; return; }

            const fragmented = render();
            info.innerHTML = `<p class="text-red-400 font-arabic">ØªÙ… ØªØ­Ø±ÙŠØ± ${freed} Ø®Ù„Ø§ÙŠØ§ Ù…Ù† "${name}"${fragmented ? ' - <span class="text-yellow-400">Ø­ØµÙ„ fragmentation!</span>' : ''}</p>`;
            nameInput.value = '';
        };

        document.getElementById('compact-btn').onclick = () => {
            const compacted = memory.filter(m => m !== null);
            memory = [...compacted, ...Array(SIZE - compacted.length).fill(null)];
            render();
            info.innerHTML = '<p class="text-purple-400 font-arabic">ØªÙ… Ø¶ØºØ· Ø§Ù„Ø°Ø§ÙƒØ±Ø©! (Compaction) - Ø§Ù„ÙØ±Ø§ØºØ§Øª ÙƒÙ„Ù‡Ø§ ÙÙŠ Ø§Ù„Ø¢Ø®Ø±</p>';
        };

        document.getElementById('reset-btn').onclick = () => {
            memory = Array(SIZE).fill(null);
            // Add some initial data
            memory[0] = 'A'; memory[1] = 'A'; memory[2] = 'A';
            memory[3] = 'B'; memory[4] = 'B';
            memory[5] = 'C'; memory[6] = 'C'; memory[7] = 'C';
            render();
            info.innerHTML = '<p class="text-slate-400">Reset.</p>';
        };

        // Initialize
        memory[0] = 'A'; memory[1] = 'A'; memory[2] = 'A';
        memory[3] = 'B'; memory[4] = 'B';
        memory[5] = 'C'; memory[6] = 'C'; memory[7] = 'C';
        render();
    </script>
</body>

</html>