<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Array Operations</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        .container {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .operation-container {
            margin: 20px 0;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 4px;
            border-left: 4px solid #3498db;
        }
        .controls {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #2980b9;
        }
        input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .array-container {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin: 20px 0;
        }
        .array-element {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #3498db;
            color: white;
            border-radius: 4px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .array-element.highlight {
            background-color: #e74c3c;
            transform: scale(1.1);
        }
        .array-element.new {
            background-color: #2ecc71;
        }
        .array-element.shifting {
            background-color: #f39c12;
        }
        .empty-slot {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #ddd;
            color: #555;
            border-radius: 4px;
            border: 2px dashed #bbb;
        }
        .code-block {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-family: monospace;
            margin: 15px 0;
        }
        .complexity {
            background-color: #f1c40f;
            color: #333;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        .operation-info {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 10px;
        }
        .info-box {
            flex: 1;
            min-width: 200px;
            padding: 10px;
            background-color: #e8f4f8;
            border-radius: 4px;
        }
        #comparison-chart {
            width: 100%;
            height: 300px;
            margin: 20px 0;
        }
        .step-display {
            margin: 15px 0;
            padding: 10px;
            background-color: #e8f4f8;
            border-radius: 4px;
            min-height: 60px;
        }
    </style>
</head>
<body>
    <h1>Array Operations</h1>
    
    <div class="container">
        <h2>Introduction to Arrays</h2>
        <p>
            Arrays are one of the most fundamental data structures in computer science. They store elements in 
            contiguous memory locations, which allows for constant-time access to any element using its index.
            However, inserting and deleting elements can be costly operations since they may require shifting 
            elements to maintain the contiguous arrangement.
        </p>
        <p>
            In this visualization, you'll explore various array operations and their time complexities:
        </p>
        <ul>
            <li><strong>Access:</strong> O(1) - Direct access using an index</li>
            <li><strong>Search:</strong> O(n) - Linear search through the array</li>
            <li><strong>Insertion:</strong> O(n) - Need to shift elements to make space</li>
            <li><strong>Deletion:</strong> O(n) - Need to shift elements to fill the gap</li>
        </ul>
    </div>

    <div class="container">
        <h2>Array Visualization</h2>
        <div class="controls">
            <button id="resetBtn">Reset Array</button>
            <input type="number" id="valueInput" placeholder="Enter a value" min="0" max="99">
            <input type="number" id="indexInput" placeholder="Enter an index" min="0">
            <button id="accessBtn">Access Element</button>
            <button id="insertBtn">Insert Element</button>
            <button id="deleteBtn">Delete Element</button>
            <button id="searchBtn">Search Element</button>
        </div>
        
        <div class="array-container" id="arrayContainer"></div>
        
        <div class="step-display" id="stepDisplay">
            <p>Use the controls above to interact with the array.</p>
        </div>
    </div>

    <div class="container">
        <h2>Operation Details</h2>
        
        <div class="operation-container">
            <h3>Access Operation <span class="complexity">O(1)</span></h3>
            <p>
                Accessing an element in an array is a constant-time operation. Since arrays store elements in 
                contiguous memory locations, we can directly calculate the memory address of any element 
                using its index.
            </p>
            <div class="code-block">
                <pre>
function access(array, index) {
    if (index >= 0 && index < array.length) {
        return array[index];  // O(1) operation
    }
    return "Index out of bounds";
}
                </pre>
            </div>
        </div>
        
        <div class="operation-container">
            <h3>Search Operation <span class="complexity">O(n)</span></h3>
            <p>
                Searching for an element in an unsorted array requires checking each element until we find a 
                match or reach the end of the array. This is a linear-time operation in the worst case.
            </p>
            <div class="code-block">
                <pre>
function search(array, value) {
    for (let i = 0; i < array.length; i++) {  // O(n) operation
        if (array[i] === value) {
            return i;  // Found the value at index i
        }
    }
    return -1;  // Value not found
}
                </pre>
            </div>
        </div>
        
        <div class="operation-container">
            <h3>Insertion Operation <span class="complexity">O(n)</span></h3>
            <p>
                Inserting an element at a specific position requires shifting all elements after that position 
                to make space. This is a linear-time operation in the worst case (insertion at the beginning).
            </p>
            <div class="code-block">
                <pre>
function insert(array, index, value) {
    if (index < 0 || index > array.length) {
        return "Invalid index";
    }
    // Shift elements to make space
    for (let i = array.length; i > index; i--) {  // O(n) operation in worst case
        array[i] = array[i - 1];
    }
    array[index] = value;
    return array;
}
                </pre>
            </div>
        </div>
        
        <div class="operation-container">
            <h3>Deletion Operation <span class="complexity">O(n)</span></h3>
            <p>
                Deleting an element requires shifting all elements after it to fill the gap.
                This is a linear-time operation in the worst case (deletion at the beginning).
            </p>
            <div class="code-block">
                <pre>
function deleteElement(array, index) {
    if (index < 0 || index >= array.length) {
        return "Invalid index";
    }
    // Shift elements to fill the gap
    for (let i = index; i < array.length - 1; i++) {  // O(n) operation in worst case
        array[i] = array[i + 1];
    }
    array.length--;  // Reduce the array length
    return array;
}
                </pre>
            </div>
        </div>
    </div>

    <div class="container">
        <h2>Performance Comparison</h2>
        <div id="comparison-chart"></div>
        <p>
            This chart compares the performance of different array operations. As you can see:
        </p>
        <ul>
            <li>Access operations remain constant regardless of array size</li>
            <li>Search, insert, and delete operations scale linearly with array size</li>
            <li>For very large arrays, the cost of insert and delete operations becomes significant</li>
        </ul>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // Initialize the array with some values
        let array = [8, 15, 23, 42, 37, 16, 9, 31];
        const maxArraySize = 15;
        
        // DOM elements
        const arrayContainer = document.getElementById('arrayContainer');
        const valueInput = document.getElementById('valueInput');
        const indexInput = document.getElementById('indexInput');
        const stepDisplay = document.getElementById('stepDisplay');
        
        // Buttons
        document.getElementById('resetBtn').addEventListener('click', resetArray);
        document.getElementById('accessBtn').addEventListener('click', accessElement);
        document.getElementById('insertBtn').addEventListener('click', insertElement);
        document.getElementById('deleteBtn').addEventListener('click', deleteElement);
        document.getElementById('searchBtn').addEventListener('click', searchElement);
        
        // Initially render the array
        renderArray();
        
        // Function to render the array
        function renderArray() {
            arrayContainer.innerHTML = '';
            for (let i = 0; i < array.length; i++) {
                const element = document.createElement('div');
                element.className = 'array-element';
                element.textContent = array[i];
                element.dataset.index = i;
                arrayContainer.appendChild(element);
            }
        }
        
        // Reset the array to initial state
        function resetArray() {
            array = [8, 15, 23, 42, 37, 16, 9, 31];
            renderArray();
            updateStepDisplay('Array has been reset to its initial state.');
        }
        
        // Access an element
        function accessElement() {
            const index = parseInt(indexInput.value);
            if (isNaN(index) || index < 0 || index >= array.length) {
                updateStepDisplay('Invalid index. Please enter a valid index.');
                return;
            }
            
            // Highlight the accessed element
            renderArray();
            const elements = document.querySelectorAll('.array-element');
            elements[index].classList.add('highlight');
            
            updateStepDisplay(`Accessed element at index ${index}: ${array[index]}. This is an O(1) operation.`);
        }
        
        // Insert an element
        async function insertElement() {
            const value = parseInt(valueInput.value);
            const index = parseInt(indexInput.value);
            
            if (isNaN(value)) {
                updateStepDisplay('Please enter a valid value to insert.');
                return;
            }
            
            if (isNaN(index) || index < 0 || index > array.length) {
                updateStepDisplay('Invalid index. Please enter a valid index.');
                return;
            }
            
            if (array.length >= maxArraySize) {
                updateStepDisplay('Array is at maximum capacity. Delete some elements first.');
                return;
            }
            
            // Visualize insertion process
            renderArray();
            
            updateStepDisplay(`Step 1: Make space for the new element at index ${index}.`);
            await sleep(1000);
            
            // Add a temporary element at the end
            array.push(null);
            renderArray();
            
            // Visualize shifting elements
            updateStepDisplay(`Step 2: Shift elements from index ${index} to the right.`);
            await sleep(1000);
            
            for (let i = array.length - 1; i > index; i--) {
                array[i] = array[i - 1];
                renderArray();
                document.querySelectorAll('.array-element')[i].classList.add('shifting');
                await sleep(500);
            }
            
            // Insert the new element
            array[index] = value;
            renderArray();
            document.querySelectorAll('.array-element')[index].classList.add('new');
            
            updateStepDisplay(`Step 3: Insert value ${value} at index ${index}. Operation complete.`);
            
            await sleep(1000);
            renderArray();
            updateStepDisplay(`Inserted ${value} at index ${index}. This is an O(n) operation because ${array.length - index - 1} elements had to be shifted.`);
        }
        
        // Delete an element
        async function deleteElement() {
            const index = parseInt(indexInput.value);
            
            if (isNaN(index) || index < 0 || index >= array.length) {
                updateStepDisplay('Invalid index. Please enter a valid index.');
                return;
            }
            
            // Visualize deletion process
            renderArray();
            document.querySelectorAll('.array-element')[index].classList.add('highlight');
            
            updateStepDisplay(`Step 1: Remove element ${array[index]} at index ${index}.`);
            await sleep(1000);
            
            // Visualize shifting elements
            updateStepDisplay(`Step 2: Shift elements after index ${index} to the left.`);
            await sleep(1000);
            
            for (let i = index; i < array.length - 1; i++) {
                array[i] = array[i + 1];
                renderArray();
                if (i < array.length - 1) {
                    document.querySelectorAll('.array-element')[i].classList.add('shifting');
                }
                await sleep(500);
            }
            
            // Remove the last element
            array.pop();
            
            renderArray();
            updateStepDisplay(`Deleted element at index ${index}. This is an O(n) operation because ${array.length - index} elements had to be shifted.`);
        }
        
        // Search for an element
        async function searchElement() {
            const value = parseInt(valueInput.value);
            
            if (isNaN(value)) {
                updateStepDisplay('Please enter a valid value to search for.');
                return;
            }
            
            renderArray();
            updateStepDisplay(`Searching for value ${value}...`);
            await sleep(1000);
            
            let found = false;
            
            for (let i = 0; i < array.length; i++) {
                // Highlight the current element being checked
                renderArray();
                document.querySelectorAll('.array-element')[i].classList.add('highlight');
                await sleep(500);
                
                if (array[i] === value) {
                    found = true;
                    updateStepDisplay(`Found value ${value} at index ${i}. This required checking ${i + 1} elements (O(n) operation).`);
                    break;
                }
                
                if (i === array.length - 1) {
                    updateStepDisplay(`Value ${value} not found in the array. Had to check all ${array.length} elements (O(n) operation).`);
                }
            }
        }
        
        // Helper function to update the step display
        function updateStepDisplay(message) {
            stepDisplay.innerHTML = `<p>${message}</p>`;
        }
        
        // Helper function for sleep
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
        
        // Initialize the performance comparison chart
        const ctx = document.getElementById('comparison-chart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [10, 100, 1000, 10000, 100000],
                datasets: [
                    {
                        label: 'Access O(1)',
                        data: [1, 1, 1, 1, 1],
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.2)',
                        borderWidth: 2,
                        tension: 0.1
                    },
                    {
                        label: 'Search O(n)',
                        data: [5, 50, 500, 5000, 50000],
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.2)',
                        borderWidth: 2,
                        tension: 0.1
                    },
                    {
                        label: 'Insert O(n)',
                        data: [5, 50, 500, 5000, 50000],
                        borderColor: '#2ecc71',
                        backgroundColor: 'rgba(46, 204, 113, 0.2)',
                        borderWidth: 2,
                        tension: 0.1
                    },
                    {
                        label: 'Delete O(n)',
                        data: [5, 50, 500, 5000, 50000],
                        borderColor: '#f39c12',
                        backgroundColor: 'rgba(243, 156, 18, 0.2)',
                        borderWidth: 2,
                        tension: 0.1
                    }
                ]
            },
            options: {
                scales: {
                    x: {
                        title: {
                            display: true,
                            text: 'Array Size'
                        },
                        type: 'logarithmic'
                    },
                    y: {
                        title: {
                            display: true,
                            text: 'Operations Count'
                        },
                        type: 'logarithmic'
                    }
                },
                plugins: {
                    title: {
                        display: true,
                        text: 'Array Operations Performance'
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return `${context.dataset.label}: ${context.raw} operations`;
                            }
                        }
                    }
                }
            }
        });
    </script>
    <script src="../../notifications/notification.js"></script>
</body>
</html> 