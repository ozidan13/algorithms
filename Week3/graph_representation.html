<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø±Ø­Ù„Ø© Ù…ÙˆØ§ØµÙ„Ø§Øª ÙˆØ§Ù‚Ø¹ÙŠØ© - Ø¬Ø±Ø§Ù ØªÙØ§Ø¹Ù„ÙŠ Ø¹ØµØ±ÙŠ</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/cytoscape@3.23.0/dist/cytoscape.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #22295a 0%, #171c29 100%);
            color: #e2e2e2;
            font-family: 'Cairo', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0; padding: 0; }
        .main-container { max-width: 1050px; margin: 0 auto; padding: 30px 10px; }
        .header, .explanation-box, .result-box {
            background: linear-gradient(135deg, #26345d 60%, #2d395b 100%);
            border-radius: 20px;
            box-shadow: 0 8px 32px #181f3f33;
            padding: 30px 20px 18px 20px;
            margin-bottom: 27px;
            border: 2px solid #324081;
        }
        .header h1 {
            color: #22c55e;
            font-size: 2.25rem;
            margin-bottom: 10px;
            font-weight: 900;
            letter-spacing: .8px; }
        .subtitle {
            color: #a4f9c6;
            font-size: 1.17rem;
            margin-bottom: 8px; 
            font-weight: 600;
            font-family: 'Cairo',sans-serif; }
        .explanation-title {
            color: #86b4ff; font-size: 1.09rem;
            margin-bottom: 9px; font-family: 'Cairo',sans-serif; font-weight: bold; }
        .explanation-box {
            font-size: 1.12rem; 
            line-height: 2.15; color: #e4f5fa;
            border-right: 6px solid #22c55e; 
            background: linear-gradient(120deg, #23355455 80%, #152036 100%);
            font-family: 'Cairo',sans-serif;
        }
        .highlight {
            color: #4ade80; font-weight: 900; background: #151e3455; border-radius: 6px; padding: 2px 7px; font-size: 1.08em;}
        #cy {
            width: 100%; height: 500px; background: #151a2b; border-radius: 19px; margin-bottom: 22px;
            box-shadow: 0 6px 20px #23294633; border: 1.5px solid #395baa;
        }
        .tool-box {
            background: #212a4a;
            border-radius: 12px; padding: 16px;
            margin-bottom: 17px; display: flex; gap: 14px;
            align-items: center; flex-wrap: wrap;
        }
        .tool-box select, .tool-box button {
            font-size: 1rem; border-radius: 8px;
            border: none; padding: 9px 20px;
            background: #e8ffe3; color: #20332c;
        }
        .tool-box button {
            background: linear-gradient(135deg,#22c55e 70%,#74faa8 100%); color: #183241; font-weight: bold; font-family: 'Cairo',sans-serif;}
        .tool-box button:hover { box-shadow: 0 2px 13px #22c55e79;}
        .result-box { font-size: 1.13rem; color: #ffeebb; font-family: 'Cairo',sans-serif; margin-bottom:15px; padding-bottom:3px; }
        .result-path { color: #67e9a0; margin: 0 2px; font-weight: bold;font-size: 1.14em; }
        @media (max-width:700px) { #cy { height: 240px; } .main-container { padding: 6px; } }
    </style>
</head>
<body>
<div class="main-container">
    <div class="header">
        <h1>Ø´Ø±Ø­ Ø§Ù„Ù€ Graph... ÙƒÙŠÙ Ø£ÙˆØµÙ„ Ù„Ù„Ø£Ø³Ø±Ø¹ØŸ ğŸš</h1>
    </div>
    <div class="explanation-box">
        <div class="explanation-title">Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø´Ø®Øµ ÙŠØ±ÙŠØ¯ Ø§Ù„ØªØ­Ø±Ùƒ Ù…Ù† Ø¨ÙŠØªÙ‡ Ø¥Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</div>
        <span class="highlight">ÙƒÙ„ Node ØªØ¹Ø¨Ø± Ø¹Ù† Ù…ÙƒØ§Ù†:</span> Home (Ø§Ù„Ù…Ù†Ø²Ù„)ØŒ Bus1 (Ø±ÙƒÙˆØ¨ Ø¨Ø§Øµ)ØŒ Metro (Ø±ÙƒÙˆØ¨ Ù…ØªØ±Ùˆ/ØªØ¨Ø¯ÙŠÙ„ Ù…ÙˆØ§ØµÙ„Ø©)ØŒ Uni (Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©)
        <br><br>Ø§Ù„Ù…Ø³Ø§Ø±Ø§Øª:
        <ul dir="ltr" style="margin-top: 9px;direction:ltr; color:#d5eaff; font-weight: 700;">
            <li>Home â†’ Walk â†’ Bus1 â†’ Metro â†’ Uni</li>
            <li>Home â†’ Taxi â†’ Uni</li>
            <li>Home â†’ Walk â†’ Uni</li>
        </ul>
        <b style="color:#ffec7c;">Ø£Ø³Ø±Ø¹ Ø·Ø±ÙŠÙ‚ØŸ Ø§Ù„Ø£Ù‚ØµØ± ÙØ¹Ù„ÙŠØ§Ù‹ØŸ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ­Ø³Ø¨Ù‡Ø§ Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠØ§Ù‹ Ø£ÙŠÙ‹Ø§ ÙƒØ§Ù† ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†Ù‚Ø§Ø· Ø£Ùˆ Ø§Ù„Ù…Ø³Ø§ÙØ©!</b><br>
        <span style="color:#88ffcd;">Ø¬Ø±Ø¨ ØªØ®ØªØ§Ø± Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ© ÙˆØ´ÙˆÙ Ø§Ù„Ø´Ø±Ø­ Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠ Ø¨Ù„ÙˆÙ† Ø§Ù„Ø·Ø±ÙŠÙ‚.</span>
    </div>
    <div class="tool-box">
        <select id="start-node"></select>
        <span style="font-size: 1.35rem;font-weight:bold;">â†’</span>
        <select id="end-node"></select>
        <button onclick="findPath()">ğŸ” Ø§Ø­Ø³Ø¨ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„Ø£Ø³Ø±Ø¹</button>
    </div>
    <div id="cy"></div>
    <div class="result-box" id="result"></div>
    
</div>
<script>
let graph = {
  'Home':   [{node:'Walk',dist:7}, {node:'Taxi',dist:18}],
  'Walk':   [{node:'Bus1',dist:3}, {node:'Uni',dist:15}],
  'Bus1':   [{node:'Metro',dist:4}],
  'Metro':  [{node:'Uni',dist:5}],
  'Taxi':   [{node:'Uni',dist:7}],
  'Uni':    []
};
const allNodes = Object.keys(graph);
const cyLayout = {
  name: 'preset',
  positions: {
    'Home': {x:90, y:350},
    'Walk': {x:230, y:320},
    'Bus1': {x:390, y:340},
    'Metro': {x:470, y:170},
    'Taxi': {x:230, y:180},
    'Uni': {x:600, y:90}
  }
};
let cy = cytoscape({
  container: document.getElementById('cy'),
  elements: [
    ...allNodes.map(n=>({group:'nodes',data:{id:n,label:n}})),
    {data:{source:'Home',target:'Walk',label:'7m'}},
    {data:{source:'Home',target:'Taxi',label:'18m'}},
    {data:{source:'Walk',target:'Bus1',label:'3m'}},
    {data:{source:'Walk',target:'Uni',label:'15m'}},
    {data:{source:'Bus1',target:'Metro',label:'4m'}},
    {data:{source:'Metro',target:'Uni',label:'5m'}},
    {data:{source:'Taxi',target:'Uni',label:'7m'}},
  ],
  style: [
    { selector: 'node', style: {'background-color': '#22c55e', 'label': 'data(label)', 'width':55,'height':55,'font-size': '18.5px','color':'#24243d','text-valign':'center','text-halign':'center','font-family':"'Cairo',sans-serif"} },
    { selector: 'edge', style: {'width':5,'line-color':'#8d9eff','target-arrow-color':'#8d9eff','target-arrow-shape':'triangle','label': 'data(label)','font-size': '15px', 'color':'#ffeebb','curve-style':'bezier'} },
    { selector: '.highlighted', style: {'background-color': '#ffeebb','line-color': '#4ade80','width':6,'color':'#21897c','font-weight':'bold','text-outline-color':'#fff','text-outline-width':3} }
  ],
  layout: cyLayout,
  userZoomingEnabled: true,
  userPanningEnabled: true,
  boxSelectionEnabled: false,
  autoungrabify: false // ÙŠØ³Ù…Ø­ Ø¨ØªØ­Ø±ÙŠÙƒ Ø§Ù„Ù€ nodes Ø¨Ø­Ø±ÙŠØ© Ø¨Ø§Ù„Ù…Ø§ÙˆØ³
});
let startSel = document.getElementById('start-node');
let endSel = document.getElementById('end-node');
allNodes.forEach(n => {
  let opt1=document.createElement('option'); opt1.value=n; opt1.textContent=n; startSel.appendChild(opt1);
  let opt2=document.createElement('option'); opt2.value=n; opt2.textContent=n; endSel.appendChild(opt2);
});
endSel.value = "Uni";
function findPath(){
  let start = startSel.value, end = endSel.value;
  let resultDiv = document.getElementById('result');
  if(start===end){resultDiv.innerHTML='<span style="color:#fbbf24;">Ø§Ø®ØªØ§Ø± Ù†Ù‚Ø·ØªÙŠÙ† Ù…Ø®ØªÙ„ÙØªÙŠÙ†!</span>'; return;}
  let r = dijkstra(graph, start, end);
  cy.elements().removeClass('highlighted');
  for(let i=0;i<r.path.length-1;i++){
    cy.getElementById(r.path[i]).addClass('highlighted');
    let eid1 = 'edge[source="'+r.path[i]+'"][target="'+r.path[i+1]+'"];';
    let eid2 = 'edge[source="'+r.path[i+1]+'"][target="'+r.path[i]+'"];';
    cy.$(eid1).addClass('highlighted');
    cy.$(eid2).addClass('highlighted');
  }
  cy.getElementById(r.path[r.path.length-1]).addClass('highlighted');
  if(r.distance===Infinity||r.path.length<2){
      resultDiv.innerHTML='<span style="color:#f87171;">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ø±ÙŠÙ‚ Ø£Ùˆ Ø§Ù„Ù…Ø³Ø§ÙØ© Ù…Ù†Ù‚ÙˆØµØ©!</span>';
  }else{
      resultDiv.innerHTML = `<div style='color:#4ade80; font-size:1.09rem;'>Ø£Ø³Ø±Ø¹ Ø·Ø±ÙŠÙ‚ Ù…Ù† <b>${start}</b> Ø¥Ù„Ù‰ <b>${end}</b>:</div><div class='result-path'>${r.path.join(' â† ')}</div><div style='color:#fbbf24;padding-top:4px;'>Ø§Ù„Ø²Ù…Ù† Ø§Ù„ÙƒÙ„ÙŠ: <b>${r.distance} Ø¯Ù‚ÙŠÙ‚Ø©</b></div><div style='color:#7dcfff; margin-top:7px;'>ÙƒÙ„ Ø®Ø·ÙˆØ· Ø§Ù„Ø±Ø­Ù„Ø© Ù…Ù„ÙˆÙ†Ø© - Ø¬Ø±Ø¨ ØªØºÙŠØ± Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©!ğŸ˜‰</div>`;
  }
}
function dijkstra(graph, start, end) {
  let dist={}, prev={}, q=new Set(Object.keys(graph));
  for(let v in graph) dist[v]=Infinity, prev[v]=null; dist[start]=0;
  while(q.size>0){
    let curr,min=1e9;q.forEach(n=>{if(dist[n]<min)min=dist[n],curr=n;});
    if(curr===end||min===Infinity)break;
    q.delete(curr);
    for(let n of graph[curr]){let d=dist[curr]+n.dist;if(d<dist[n.node])dist[n.node]=d,prev[n.node]=curr;}
  }
  let path=[],c=end; while(c) path.unshift(c),c=prev[c];
  return {path,distance:dist[end]};
}
</script>
</body>
</html>